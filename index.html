<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empire Maritime - Gestionnaire de Port</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        .container {
            max-width: 100vw;
            min-height: 100vh;
            padding: 10px;
        }

        .header {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #00d4ff;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .resources {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .resource {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
        }

        .fuel-resource {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #ffc107;
        }

        .navigation {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .nav-btn {
            flex: 1;
            min-width: 80px;
            padding: 12px 8px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 12px;
        }

        .nav-btn:hover, .nav-btn:active {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #00d4ff, #0984e3);
        }

        .screen {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            min-height: 60vh;
        }

        .screen.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ships-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .ship-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .ship-card:hover {
            border-color: #00d4ff;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.2);
        }

        .ship-card.traveling {
            border-color: #fdcb6e;
            background: rgba(253, 203, 110, 0.2);
        }

        .ship-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .ship-name {
            font-size: 18px;
            font-weight: bold;
            color: #00d4ff;
        }

        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-available {
            background: #00b894;
            color: white;
        }

        .status-traveling {
            background: #fdcb6e;
            color: #2d3436;
        }

        .ship-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }

        .stat {
            text-align: center;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: #00d4ff;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.8;
        }

        .destinations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .destination-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .destination-card:hover {
            border-color: #00d4ff;
            transform: scale(1.02);
        }

        .destination-card.insufficient-fuel {
            border-color: #d63031;
            background: rgba(214, 48, 49, 0.2);
        }

        .destination-name {
            font-size: 16px;
            font-weight: bold;
            color: #00d4ff;
            margin-bottom: 8px;
        }

        .destination-info {
            font-size: 14px;
            opacity: 0.9;
        }

        .fuel-cost {
            background: rgba(255, 193, 7, 0.2);
            border-radius: 10px;
            padding: 5px 8px;
            margin: 5px 0;
            font-weight: bold;
            color: #ffc107;
        }

        .btn {
            padding: 12px 20px;
            background: linear-gradient(45deg, #00d4ff, #0984e3);
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover, .btn:active {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        .btn:disabled {
            background: #636e72;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #0984e3);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .ship-animation {
            position: relative;
            width: 100%;
            height: 40px;
            background: linear-gradient(to right, #0984e3, #74b9ff, #0984e3);
            border-radius: 20px;
            margin: 10px 0;
            overflow: hidden;
        }

        .sailing-ship {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            animation: sailing 3s ease-in-out infinite;
            z-index: 2;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 20px;
            background: repeating-linear-gradient(
                90deg,
                rgba(255,255,255,0.1) 0px,
                rgba(255,255,255,0.2) 10px,
                rgba(255,255,255,0.1) 20px
            );
            animation: waves 2s linear infinite;
        }

        @keyframes sailing {
            0%, 100% { transform: translateY(-50%) rotate(-2deg); }
            50% { transform: translateY(-50%) rotate(2deg); }
        }

        @keyframes waves {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }

        .ship-trail {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
            transform: translateY(-50%);
            animation: trail 4s ease-in-out infinite;
        }

        @keyframes trail {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .shop-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        .shop-item h3 {
            color: #00d4ff;
            margin-bottom: 10px;
        }

        .price {
            font-size: 18px;
            font-weight: bold;
            color: #fdcb6e;
            margin: 10px 0;
        }

        .refinery-section {
            background: rgba(255, 193, 7, 0.1);
            border: 2px solid #ffc107;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .refinery-title {
            color: #ffc107;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .fuel-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .fuel-option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .fuel-amount {
            font-size: 24px;
            font-weight: bold;
            color: #ffc107;
            margin: 10px 0;
        }

        .save-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .save-btn {
            flex: 1;
            padding: 10px;
            background: linear-gradient(45deg, #00b894, #00a085);
            border: none;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #2d3436;
            padding: 30px;
            border-radius: 20px;
            max-width: 90vw;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #ddd;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #00b894;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 1001;
            display: none;
        }

        .admin-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #e17055;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .admin-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
        }

        .admin-input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 16px;
        }

        .admin-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .admin-btn {
            background: linear-gradient(45deg, #e17055, #d63031);
            border: none;
            border-radius: 10px;
            color: white;
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .admin-btn:hover {
            transform: scale(1.05);
        }

        .admin-warning {
            background: rgba(231, 112, 85, 0.2);
            border: 1px solid #e17055;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            color: #fdcb6e;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                padding: 5px;
            }

            .header {
                flex-direction: column;
                gap: 10px;
            }

            .resources {
                justify-content: center;
            }

            .nav-btn {
                font-size: 11px;
                padding: 10px 6px;
            }

            .ships-grid {
                grid-template-columns: 1fr;
            }

            .destinations-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üö¢ Empire Maritime</div>
            <div class="resources">
                <div class="resource">üí∞ <span id="money">1000</span>‚Ç¨</div>
                <div class="resource fuel-resource">‚õΩ <span id="fuel">100</span>L</div>
                <div class="resource">‚öì <span id="reputation">0</span></div>
                <div class="resource">üèÜ <span id="level">1</span></div>
            </div>
        </div>

        <div class="save-buttons">
            <button class="save-btn" onclick="saveGame()">üíæ Sauvegarder</button>
            <button class="save-btn" onclick="loadGame()">üìÇ Charger</button>
            <button class="save-btn" onclick="resetGame()" style="background: linear-gradient(45deg, #e17055, #d63031);">üîÑ Reset</button>
        </div>

        <div class="navigation">
            <button class="nav-btn active" onclick="showScreen('fleet')">üö¢ Flotte</button>
            <button class="nav-btn" onclick="showScreen('destinations')">üó∫Ô∏è Destinations</button>
            <button class="nav-btn" onclick="showScreen('shop')">üõí Boutique</button>
            <button class="nav-btn" onclick="showScreen('admin')">‚öôÔ∏è Admin</button>
            <button class="nav-btn" onclick="showScreen('stats')">üìä Statistiques</button>
        </div>

        <div id="fleet-screen" class="screen active">
            <h2>üö¢ Votre Flotte</h2>
            <div id="ships-container" class="ships-grid"></div>
        </div>

        <div id="destinations-screen" class="screen">
            <h2>üó∫Ô∏è Destinations Disponibles</h2>
            <div id="selected-ship-info"></div>
            <div id="destinations-container" class="destinations-grid"></div>
        </div>

        <div id="shop-screen" class="screen">
            <h2>üõí Boutique Maritime</h2>
            
            <div class="refinery-section">
                <div class="refinery-title">
                    <span>‚õΩ</span> Raffinerie de Carburant
                </div>
                <p style="opacity: 0.9; margin-bottom: 15px;">Achetez du gasoil pour alimenter vos navires. Chaque destination n√©cessite du carburant pour le voyage.</p>
                
                <div class="fuel-controls">
                    <div class="fuel-option">
                        <h4>Petit Plein</h4>
                        <div class="fuel-amount">50L</div>
                        <div class="price">100‚Ç¨</div>
                        <button class="btn" onclick="buyFuel(50, 100)">Acheter</button>
                    </div>
                    <div class="fuel-option">
                        <h4>Plein Moyen</h4>
                        <div class="fuel-amount">150L</div>
                        <div class="price">280‚Ç¨</div>
                        <button class="btn" onclick="buyFuel(150, 280)">Acheter</button>
                    </div>
                    <div class="fuel-option">
                        <h4>Grand Plein</h4>
                        <div class="fuel-amount">500L</div>
                        <div class="price">900‚Ç¨</div>
                        <button class="btn" onclick="buyFuel(500, 900)">Acheter</button>
                    </div>
                    <div class="fuel-option">
                        <h4>Plein Maximum</h4>
                        <div class="fuel-amount">1000L</div>
                        <div class="price">1600‚Ç¨</div>
                        <button class="btn" onclick="buyFuel(1000, 1600)">Acheter</button>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 20px;">üö¢ Navires</h3>
            <div id="shop-container" class="shop-grid"></div>
        </div>

        <div id="admin-screen" class="screen">
            <h2>‚öôÔ∏è Panneau d'Administration</h2>
            <div class="admin-warning">
                ‚ö†Ô∏è ATTENTION : Ces param√®tres modifient l'√©quilibre du jeu. Utilisez avec pr√©caution !
            </div>
            
            <div class="admin-grid">
                <div class="admin-card">
                    <h3>üí∞ √âconomie G√©n√©rale</h3>
                    <label>Argent de d√©part :</label>
                    <input type="number" id="startMoney" class="admin-input" placeholder="1000" value="1000">
                    
                    <label>Gasoil de d√©part :</label>
                    <input type="number" id="startFuel" class="admin-input" placeholder="100" value="100">
                    
                    <label>Multiplicateur gains :</label>
                    <input type="number" id="rewardMultiplier" class="admin-input" placeholder="1.0" value="1.0" step="0.1">
                    
                    <button class="admin-btn" onclick="applyEconomySettings()">Appliquer √âconomie</button>
                </div>

                <div class="admin-card">
                    <h3>üö¢ Prix des Navires</h3>
                    <label>Cargo Standard :</label>
                    <input type="number" id="ship1Price" class="admin-input" placeholder="2500" value="2500">
                    
                    <label>Cargo Rapide :</label>
                    <input type="number" id="ship2Price" class="admin-input" placeholder="5000" value="5000">
                    
                    <label>Porte-conteneurs :</label>
                    <input type="number" id="ship3Price" class="admin-input" placeholder="15000" value="15000">
                    
                    <label>Yacht de Luxe :</label>
                    <input type="number" id="ship4Price" class="admin-input" placeholder="25000" value="25000">
                    
                    <button class="admin-btn" onclick="applyShipPrices()">Appliquer Prix Navires</button>
                </div>

                <div class="admin-card">
                    <h3>üó∫Ô∏è Gains Destinations</h3>
                    <label>Port Local :</label>
                    <input type="number" id="dest1Reward" class="admin-input" placeholder="50" value="50">
                    
                    <label>Marseille :</label>
                    <input type="number" id="dest2Reward" class="admin-input" placeholder="150" value="150">
                    
                    <label>Londres :</label>
                    <input type="number" id="dest3Reward" class="admin-input" placeholder="400" value="400">
                    
                    <label>New York :</label>
                    <input type="number" id="dest4Reward" class="admin-input" placeholder="1200" value="1200">
                    
                    <label>Tokyo :</label>
                    <input type="number" id="dest5Reward" class="admin-input" placeholder="2500" value="2500">
                    
                    <label>Singapour :</label>
                    <input type="number" id="dest6Reward" class="admin-input" placeholder="1800" value="1800">
                    
                    <button class="admin-btn" onclick="applyDestinationRewards()">Appliquer Destinations</button>
                </div>

                <div class="admin-card">
                    <h3>‚õΩ Prix du Carburant</h3>
                    <label>Prix par litre :</label>
                    <input type="number" id="fuelPrice" class="admin-input" placeholder="2" value="2" step="0.1">
                    
                    <button class="admin-btn" onclick="applyFuelSettings()">Appliquer Carburant</button>
                </div>

                <div class="admin-card">
                    <h3>üéÆ Actions Rapides</h3>
                    <button class="admin-btn" onclick="addMoney()">+1000‚Ç¨</button>
                    <button class="admin-btn" onclick="addFuel()">+500L Gasoil</button>
                    <button class="admin-btn" onclick="maxReputation()">Max R√©putation</button>
                    <button class="admin-btn" onclick="resetToDefaults()">R√©initialiser Param√®tres</button>
                    <button class="admin-btn" onclick="exportSettings()">Exporter Config</button>
                    <button class="admin-btn" onclick="importSettings()">Importer Config</button>
                </div>
            </div>
        </div>

        <div id="stats-screen" class="screen">
            <h2>üìä Statistiques de l'Empire</h2>
            <div id="stats-container"></div>
        </div>
    </div>

    <div id="travel-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>üö¢ Envoyer en Mission</h2>
            <div id="travel-details"></div>
            <button class="btn" onclick="startTravel()">üöÄ Commencer le Voyage</button>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script>
        // √âtat du jeu
        let gameState = {
            money: 1000,
            fuel: 100,
            reputation: 0,
            level: 1,
            ships: [
                {
                    id: 1,
                    name: "Petit Cargo",
                    type: "cargo",
                    capacity: 50,
                    speed: 1,
                    fuelConsumption: 1,
                    status: "available",
                    destination: null,
                    arrivalTime: null,
                    earnings: 0
                }
            ],
            destinations: [
                {
                    id: 1,
                    name: "Port Local",
                    distance: 0.0833,
                    reward: 50,
                    reputation: 2,
                    fuelCost: 5,
                    description: "Livraison express locale"
                },
                {
                    id: 2,
                    name: "Marseille",
                    distance: 2,
                    reward: 150,
                    reputation: 5,
                    fuelCost: 15,
                    description: "Port m√©diterran√©en anim√©"
                },
                {
                    id: 3,
                    name: "Londres",
                    distance: 6,
                    reward: 400,
                    reputation: 15,
                    fuelCost: 40,
                    description: "Grand port commercial"
                },
                {
                    id: 4,
                    name: "New York",
                    distance: 24,
                    reward: 1200,
                    reputation: 40,
                    fuelCost: 120,
                    description: "M√©tropole am√©ricaine"
                },
                {
                    id: 5,
                    name: "Tokyo",
                    distance: 48,
                    reward: 2500,
                    reputation: 80,
                    fuelCost: 200,
                    description: "Capital du Pacifique"
                },
                {
                    id: 6,
                    name: "Singapour",
                    distance: 36,
                    reward: 1800,
                    reputation: 60,
                    fuelCost: 150,
                    description: "Hub asiatique"
                }
            ],
            shopItems: [
                {
                    id: 1,
                    name: "Cargo Standard",
                    price: 2500,
                    type: "ship",
                    specs: { capacity: 100, speed: 1.2, fuelConsumption: 0.8 }
                },
                {
                    id: 2,
                    name: "Cargo Rapide",
                    price: 5000,
                    type: "ship",
                    specs: { capacity: 80, speed: 2, fuelConsumption: 1.5 }
                },
                {
                    id: 3,
                    name: "Porte-conteneurs",
                    price: 15000,
                    type: "ship",
                    specs: { capacity: 300, speed: 0.8, fuelConsumption: 2.5 }
                },
                {
                    id: 4,
                    name: "Yacht de Luxe",
                    price: 25000,
                    type: "ship",
                    specs: { capacity: 20, speed: 3, fuelConsumption: 3 }
                }
            ],
            statistics: {
                totalEarnings: 0,
                totalTrips: 0,
                totalDistance: 0,
                totalFuelConsumed: 0
            },
            adminSettings: {
                rewardMultiplier: 1.0,
                startMoney: 1000,
                startFuel: 100,
                fuelPricePerLiter: 2
            }
        };

        let selectedShip = null;
        let currentScreen = 'fleet';

        // Fonctions d'affichage
        function updateDisplay() {
            document.getElementById('money').textContent = gameState.money;
            document.getElementById('fuel').textContent = gameState.fuel;
            document.getElementById('reputation').textContent = gameState.reputation;
            document.getElementById('level').textContent = gameState.level;
            
            updateShipsDisplay();
            updateDestinationsDisplay();
            updateShopDisplay();
            updateStatsDisplay();
        }

        function updateShipsDisplay() {
            const container = document.getElementById('ships-container');
            container.innerHTML = '';

            gameState.ships.forEach(ship => {
                const shipCard = document.createElement('div');
                shipCard.className = `ship-card ${ship.status === 'traveling' ? 'traveling' : ''}`;
                
                let statusBadge = ship.status === 'available' ? 
                    '<span class="status-badge status-available">Disponible</span>' :
                    '<span class="status-badge status-traveling">En voyage</span>';

                let progressBar = '';
                let actionButton = '';

                if (ship.status === 'traveling') {
                    const totalTime = ship.travelTime * 60 * 60 * 1000;
                    const elapsed = Date.now() - ship.departureTime;
                    const progress = Math.min(100, (elapsed / totalTime) * 100);
                    const remainingMs = Math.max(0, totalTime - elapsed);
                    const remainingHours = Math.floor(remainingMs / (60 * 60 * 1000));
                    const remainingMinutes = Math.floor((remainingMs % (60 * 60 * 1000)) / (60 * 1000));
                    
                    let timeDisplay = '';
                    if (remainingHours > 0) {
                        timeDisplay = `${remainingHours}h ${remainingMinutes}min`;
                    } else {
                        timeDisplay = `${remainingMinutes}min`;
                    }
                    
                    progressBar = `
                        <div class="ship-animation">
                            <div class="wave"></div>
                            <div class="ship-trail"></div>
                            <div class="sailing-ship" style="left: ${progress}%">üö¢</div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${progress}%"></div>
                        </div>
                        <div>Arriv√©e dans: ${timeDisplay} vers ${ship.destination.name}</div>
                    `;
                } else {
                    actionButton = `<button class="btn" onclick="selectShipForTravel(${ship.id})">üöÄ Envoyer en Mission</button>`;
                }

                shipCard.innerHTML = `
                    <div class="ship-status">
                        <div class="ship-name">${ship.name}</div>
                        ${statusBadge}
                    </div>
                    <div class="ship-stats">
                        <div class="stat">
                            <div class="stat-value">${ship.capacity}</div>
                            <div class="stat-label">Capacit√©</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${ship.speed}x</div>
                            <div class="stat-label">Vitesse</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${ship.fuelConsumption}x</div>
                            <div class="stat-label">Consommation</div>
                        </div>
                    </div>
                    ${progressBar}
                    ${actionButton}
                `;

                container.appendChild(shipCard);
            });
        }

        function updateDestinationsDisplay() {
            const container = document.getElementById('destinations-container');
            container.innerHTML = '';

            gameState.destinations.forEach(destination => {
                const destCard = document.createElement('div');
                let fuelCost = destination.fuelCost;
                
                if (selectedShip) {
                    fuelCost = Math.ceil(destination.fuelCost * selectedShip.fuelConsumption);
                }
                
                const hasEnoughFuel = gameState.fuel >= fuelCost;
                destCard.className = `destination-card ${!hasEnoughFuel ? 'insufficient-fuel' : ''}`;
                destCard.onclick = () => selectDestination(destination);

                destCard.innerHTML = `
                    <div class="destination-name">${destination.name}</div>
                    <div class="destination-info">
                        <div>üïí ${destination.name === "Port Local" ? "5 min" : (destination.distance < 1 ? Math.round(destination.distance * 60) + 'min' : destination.distance + 'h')} de voyage</div>
                        <div>üí∞ ${destination.reward}‚Ç¨ de r√©compense</div>
                        <div>‚öì +${destination.reputation} r√©putation</div>
                        <div class="fuel-cost">‚õΩ ${fuelCost}L de carburant</div>
                        ${!hasEnoughFuel ? '<div style="color: #d63031; font-weight: bold;">‚ùå Carburant insuffisant</div>' : ''}
                        <div style="margin-top: 8px; opacity: 0.8;">${destination.description}</div>
                    </div>
                `;

                container.appendChild(destCard);
            });
        }

        function updateShopDisplay() {
            const container = document.getElementById('shop-container');
            container.innerHTML = '';

            gameState.shopItems.forEach(item => {
                const shopItem = document.createElement('div');
                shopItem.className = 'shop-item';

                const canAfford = gameState.money >= item.price;
                const buttonClass = canAfford ? 'btn' : 'btn';
                const buttonText = canAfford ? 'Acheter' : 'Pas assez d\'argent';

                shopItem.innerHTML = `
                    <h3>${item.name}</h3>
                    <div>Capacit√©: ${item.specs.capacity}</div>
                    <div>Vitesse: ${item.specs.speed}x</div>
                    <div>Consommation: ${item.specs.fuelConsumption}x</div>
                    <div class="price">${item.price}‚Ç¨</div>
                    <button class="${buttonClass}" onclick="buyItem(${item.id})" ${!canAfford ? 'disabled' : ''}>
                        ${buttonText}
                    </button>
                `;

                container.appendChild(shopItem);
            });
        }

        function updateStatsDisplay() {
            const container = document.getElementById('stats-container');
            container.innerHTML = `
                <div class="ship-stats">
                    <div class="stat">
                        <div class="stat-value">${gameState.statistics.totalEarnings}</div>
                        <div class="stat-label">Gains totaux (‚Ç¨)</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">${gameState.statistics.totalTrips}</div>
                        <div class="stat-label">Voyages effectu√©s</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">${gameState.statistics.totalDistance}</div>
                        <div class="stat-label">Distance parcourue (h)</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">${gameState.statistics.totalFuelConsumed}</div>
                        <div class="stat-label">Carburant consomm√© (L)</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">${gameState.ships.length}</div>
                        <div class="stat-label">Navires poss√©d√©s</div>
                    </div>
                </div>
            `;
        }

        // Fonctions de navigation
        function showScreen(screenName) {
            currentScreen = screenName;
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(screenName + '-screen').classList.add('active');
            event.target.classList.add('active');
        }

        // Fonctions audio
        function playSound(type) {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            
            if (type === 'departure') {
                const oscillator = context.createOscillator();
                const gainNode = context.createGain();
                
                oscillator.frequency.setValueAtTime(150, context.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(100, context.currentTime + 1);
                
                gainNode.gain.setValueAtTime(0, context.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, context.currentTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 1);
                
                oscillator.connect(gainNode);
                gainNode.connect(context.destination);
                
                oscillator.start(context.currentTime);
                oscillator.stop(context.currentTime + 1);
                
            } else if (type === 'arrival') {
                const oscillator = context.createOscillator();
                const gainNode = context.createGain();
                
                oscillator.frequency.setValueAtTime(800, context.currentTime);
                oscillator.frequency.setValueAtTime(600, context.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(800, context.currentTime + 0.2);
                
                gainNode.gain.setValueAtTime(0, context.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.4, context.currentTime + 0.05);
                gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.5);
                
                oscillator.connect(gainNode);
                gainNode.connect(context.destination);
                
                oscillator.start(context.currentTime);
                oscillator.stop(context.currentTime + 0.5);
                
            } else if (type === 'money') {
                for (let i = 0; i < 3; i++) {
                    setTimeout(() => {
                        const oscillator = context.createOscillator();
                        const gainNode = context.createGain();
                        
                        oscillator.frequency.setValueAtTime(1000 + Math.random() * 500, context.currentTime);
                        oscillator.frequency.exponentialRampToValueAtTime(600 + Math.random() * 200, context.currentTime + 0.1);
                        
                        gainNode.gain.setValueAtTime(0, context.currentTime);
                        gainNode.gain.linearRampToValueAtTime(0.2, context.currentTime + 0.01);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.15);
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(context.destination);
                        
                        oscillator.start(context.currentTime);
                        oscillator.stop(context.currentTime + 0.15);
                    }, i * 50);
                }
            } else if (type === 'fuel') {
                const oscillator = context.createOscillator();
                const gainNode = context.createGain();
                
                oscillator.frequency.setValueAtTime(300, context.currentTime);
                oscillator.frequency.linearRampToValueAtTime(250, context.currentTime + 0.5);
                
                gainNode.gain.setValueAtTime(0, context.currentTime);
                gainNode.gain.linearRampToValueAtTime(0.3, context.currentTime + 0.1);
                gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.8);
                
                oscillator.connect(gainNode);
                gainNode.connect(context.destination);
                
                oscillator.start(context.currentTime);
                oscillator.stop(context.currentTime + 0.8);
            }
        }

        // Fonctions Carburant
        function buyFuel(amount, cost) {
            if (gameState.money >= cost) {
                gameState.money -= cost;
                gameState.fuel += amount;
                playSound('fuel');
                showNotification(`+${amount}L de carburant achet√© pour ${cost}‚Ç¨!`);
                updateDisplay();
            } else {
                showNotification('Pas assez d\'argent pour acheter ce carburant!');
            }
        }

        // Fonctions Admin
        function applyEconomySettings() {
            const startMoney = parseInt(document.getElementById('startMoney').value) || 1000;
            const startFuel = parseInt(document.getElementById('startFuel').value) || 100;
            const rewardMultiplier = parseFloat(document.getElementById('rewardMultiplier').value) || 1.0;
            
            gameState.adminSettings.startMoney = startMoney;
            gameState.adminSettings.startFuel = startFuel;
            gameState.adminSettings.rewardMultiplier = rewardMultiplier;
            
            showNotification('Param√®tres √©conomiques appliqu√©s !');
        }

        function applyShipPrices() {
            const prices = [
                parseInt(document.getElementById('ship1Price').value) || 2500,
                parseInt(document.getElementById('ship2Price').value) || 5000,
                parseInt(document.getElementById('ship3Price').value) || 15000,
                parseInt(document.getElementById('ship4Price').value) || 25000
            ];
            
            gameState.shopItems.forEach((item, index) => {
                if (index < prices.length) {
                    item.price = prices[index];
                }
            });
            
            showNotification('Prix des navires modifi√©s !');
            updateDisplay();
        }

        function applyDestinationRewards() {
            const rewards = [
                parseInt(document.getElementById('dest1Reward').value) || 50,
                parseInt(document.getElementById('dest2Reward').value) || 150,
                parseInt(document.getElementById('dest3Reward').value) || 400,
                parseInt(document.getElementById('dest4Reward').value) || 1200,
                parseInt(document.getElementById('dest5Reward').value) || 2500,
                parseInt(document.getElementById('dest6Reward').value) || 1800
            ];
            
            gameState.destinations.forEach((dest, index) => {
                if (index < rewards.length) {
                    dest.reward = rewards[index];
                }
            });
            
            showNotification('Gains des destinations modifi√©s !');
            updateDisplay();
        }

        function applyFuelSettings() {
            const fuelPrice = parseFloat(document.getElementById('fuelPrice').value) || 2;
            gameState.adminSettings.fuelPricePerLiter = fuelPrice;
            showNotification('Prix du carburant modifi√© !');
        }

        function addMoney() {
            gameState.money += 1000;
            showNotification('+1000‚Ç¨ ajout√© !');
            updateDisplay();
        }

        function addFuel() {
            gameState.fuel += 500;
            showNotification('+500L de carburant ajout√© !');
            updateDisplay();
        }

        function maxReputation() {
            gameState.reputation += 1000;
            gameState.level = Math.floor(gameState.reputation / 100) + 1;
            showNotification('R√©putation maximis√©e !');
            updateDisplay();
        }

        function resetToDefaults() {
            document.getElementById('startMoney').value = 1000;
            document.getElementById('startFuel').value = 100;
            document.getElementById('rewardMultiplier').value = 1.0;
            document.getElementById('fuelPrice').value = 2;
            
            document.getElementById('ship1Price').value = 2500;
            document.getElementById('ship2Price').value = 5000;
            document.getElementById('ship3Price').value = 15000;
            document.getElementById('ship4Price').value = 25000;
            
            document.getElementById('dest1Reward').value = 50;
            document.getElementById('dest2Reward').value = 150;
            document.getElementById('dest3Reward').value = 400;
            document.getElementById('dest4Reward').value = 1200;
            document.getElementById('dest5Reward').value = 2500;
            document.getElementById('dest6Reward').value = 1800;
            
            showNotification('Param√®tres r√©initialis√©s aux valeurs par d√©faut !');
        }

        function exportSettings() {
            const settings = {
                adminSettings: gameState.adminSettings,
                shipPrices: gameState.shopItems.map(item => item.price),
                destinationRewards: gameState.destinations.map(dest => dest.reward)
            };
            
            const dataStr = JSON.stringify(settings, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'maritime_empire_config.json';
            link.click();
            
            showNotification('Configuration export√©e !');
        }

        function importSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const settings = JSON.parse(e.target.result);
                            
                            if (settings.adminSettings) {
                                gameState.adminSettings = settings.adminSettings;
                            }
                            if (settings.shipPrices) {
                                settings.shipPrices.forEach((price, index) => {
                                    if (gameState.shopItems[index]) {
                                        gameState.shopItems[index].price = price;
                                    }
                                });
                            }
                            if (settings.destinationRewards) {
                                settings.destinationRewards.forEach((reward, index) => {
                                    if (gameState.destinations[index]) {
                                        gameState.destinations[index].reward = reward;
                                    }
                                });
                            }
                            
                            showNotification('Configuration import√©e avec succ√®s !');
                            updateDisplay();
                        } catch (error) {
                            showNotification('Erreur lors de l\'importation !');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        function resetGame() {
            if (confirm('√ätes-vous s√ªr de vouloir recommencer le jeu ? Toutes vos donn√©es seront perdues !')) {
                Object.keys(localStorage).forEach(key => {
                    if (key.startsWith('maritimeEmpire')) {
                        localStorage.removeItem(key);
                    }
                });
                
                gameState = {
                    money: gameState.adminSettings?.startMoney || 1000,
                    fuel: gameState.adminSettings?.startFuel || 100,
                    reputation: 0,
                    level: 1,
                    ships: [
                        {
                            id: 1,
                            name: "Petit Cargo",
                            type: "cargo",
                            capacity: 50,
                            speed: 1,
                            fuelConsumption: 1,
                            status: "available",
                            destination: null,
                            arrivalTime: null,
                            earnings: 0
                        }
                    ],
                    destinations: [
                        {
                            id: 1,
                            name: "Port Local",
                            distance: 0.0833,
                            reward: 50,
                            reputation: 2,
                            fuelCost: 5,
                            description: "Livraison express locale"
                        },
                        {
                            id: 2,
                            name: "Marseille",
                            distance: 2,
                            reward: 150,
                            reputation: 5,
                            fuelCost: 15,
                            description: "Port m√©diterran√©en anim√©"
                        },
                        {
                            id: 3,
                            name: "Londres",
                            distance: 6,
                            reward: 400,
                            reputation: 15,
                            fuelCost: 40,
                            description: "Grand port commercial"
                        },
                        {
                            id: 4,
                            name: "New York",
                            distance: 24,
                            reward: 1200,
                            reputation: 40,
                            fuelCost: 120,
                            description: "M√©tropole am√©ricaine"
                        },
                        {
                            id: 5,
                            name: "Tokyo",
                            distance: 48,
                            reward: 2500,
                            reputation: 80,
                            fuelCost: 200,
                            description: "Capital du Pacifique"
                        },
                        {
                            id: 6,
                            name: "Singapour",
                            distance: 36,
                            reward: 1800,
                            reputation: 60,
                            fuelCost: 150,
                            description: "Hub asiatique"
                        }
                    ],
                    shopItems: [
                        {
                            id: 1,
                            name: "Cargo Standard",
                            price: 2500,
                            type: "ship",
                            specs: { capacity: 100, speed: 1.2, fuelConsumption: 0.8 }
                        },
                        {
                            id: 2,
                            name: "Cargo Rapide",
                            price: 5000,
                            type: "ship",
                            specs: { capacity: 80, speed: 2, fuelConsumption: 1.5 }
                        },
                        {
                            id: 3,
                            name: "Porte-conteneurs",
                            price: 15000,
                            type: "ship",
                            specs: { capacity: 300, speed: 0.8, fuelConsumption: 2.5 }
                        },
                        {
                            id: 4,
                            name: "Yacht de Luxe",
                            price: 25000,
                            type: "ship",
                            specs: { capacity: 20, speed: 3, fuelConsumption: 3 }
                        }
                    ],
                    statistics: {
                        totalEarnings: 0,
                        totalTrips: 0,
                        totalDistance: 0,
                        totalFuelConsumed: 0
                    },
                    adminSettings: gameState.adminSettings || {
                        rewardMultiplier: 1.0,
                        startMoney: 1000,
                        startFuel: 100,
                        fuelPricePerLiter: 2
                    }
                };
                
                selectedShip = null;
                updateDisplay();
                showNotification('Jeu r√©initialis√© avec succ√®s ! Bon voyage capitaine ! üö¢');
            }
        }

        // Fonctions de jeu
        function selectShipForTravel(shipId) {
            selectedShip = gameState.ships.find(ship => ship.id === shipId);
            showScreen('destinations');
            
            const info = document.getElementById('selected-ship-info');
            info.innerHTML = `
                <div style="background: rgba(0,212,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                    <h3>üö¢ ${selectedShip.name} s√©lectionn√©</h3>
                    <p>Capacit√©: ${selectedShip.capacity} | Vitesse: ${selectedShip.speed}x | Consommation: ${selectedShip.fuelConsumption}x</p>
                </div>
            `;
        }

        function selectDestination(destination) {
            if (!selectedShip) {
                showNotification('Veuillez d\'abord s√©lectionner un navire');
                return;
            }

            const fuelRequired = Math.ceil(destination.fuelCost * selectedShip.fuelConsumption);
            
            if (gameState.fuel < fuelRequired) {
                showNotification(`Carburant insuffisant ! Il vous faut ${fuelRequired}L pour ce voyage.`);
                return;
            }

            const modal = document.getElementById('travel-modal');
            const details = document.getElementById('travel-details');
            
            let travelTime = destination.distance / selectedShip.speed;
            if (destination.name === "Port Local") {
                travelTime = 5 / 60;
            }
            
            const baseEarnings = Math.floor(destination.reward * (selectedShip.capacity / 100));
            const earnings = Math.floor(baseEarnings * (gameState.adminSettings?.rewardMultiplier || 1.0));

            const timeDisplay = destination.name === "Port Local" ? 
                "5 minutes" :
                (travelTime < 1 ? 
                    Math.round(travelTime * 60) + ' minutes' : 
                    Math.round(travelTime) + ' heure(s)');

            details.innerHTML = `
                <h3>üö¢ ${selectedShip.name} ‚Üí ${destination.name}</h3>
                <div style="margin: 20px 0;">
                    <div><strong>Temps de voyage:</strong> ${timeDisplay}</div>
                    <div><strong>Gains estim√©s:</strong> ${earnings}‚Ç¨</div>
                    <div><strong>R√©putation:</strong> +${destination.reputation}</div>
                    <div><strong>Carburant requis:</strong> ${fuelRequired}L</div>
                    <div style="margin-top: 10px; opacity: 0.8;">${destination.description}</div>
                </div>
            `;

            modal.style.display = 'block';
            modal.selectedDestination = destination;
        }

        function startTravel() {
            const destination = document.getElementById('travel-modal').selectedDestination;
            const fuelRequired = Math.ceil(destination.fuelCost * selectedShip.fuelConsumption);
            
            let travelTime = destination.distance / selectedShip.speed;
            
            if (destination.name === "Port Local") {
                travelTime = 5 / 60;
            }
            
            // D√©duire le carburant
            gameState.fuel -= fuelRequired;
            gameState.statistics.totalFuelConsumed += fuelRequired;
            
            selectedShip.status = 'traveling';
            selectedShip.destination = destination;
            selectedShip.departureTime = Date.now();
            selectedShip.travelTime = travelTime;
            
            const baseEarnings = Math.floor(destination.reward * (selectedShip.capacity / 100));
            selectedShip.earnings = Math.floor(baseEarnings * (gameState.adminSettings?.rewardMultiplier || 1.0));

            playSound('departure');

            closeModal();
            showNotification(`${selectedShip.name} part vers ${destination.name}! (-${fuelRequired}L carburant)`);
            selectedShip = null;
            
            updateDisplay();
            showScreen('fleet');
        }

        function buyItem(itemId) {
            const item = gameState.shopItems.find(i => i.id === itemId);
            if (gameState.money >= item.price) {
                gameState.money -= item.price;
                
                const newShip = {
                    id: gameState.ships.length + 1,
                    name: item.name,
                    type: item.type,
                    capacity: item.specs.capacity,
                    speed: item.specs.speed,
                    fuelConsumption: item.specs.fuelConsumption,
                    status: 'available',
                    destination: null,
                    arrivalTime: null,
                    earnings: 0
                };
                
                gameState.ships.push(newShip);
                showNotification(`${item.name} achet√© avec succ√®s!`);
                updateDisplay();
            }
        }

        function checkArrivals() {
            gameState.ships.forEach(ship => {
                if (ship.status === 'traveling') {
                    const travelTime = ship.travelTime * 60 * 60 * 1000;
                    const elapsed = Date.now() - ship.departureTime;
                    
                    if (elapsed >= travelTime) {
                        ship.status = 'available';
                        gameState.money += ship.earnings;
                        gameState.reputation += ship.destination.reputation;
                        gameState.statistics.totalEarnings += ship.earnings;
                        gameState.statistics.totalTrips += 1;
                        gameState.statistics.totalDistance += ship.destination.distance;
                        
                        gameState.level = Math.floor(gameState.reputation / 100) + 1;
                        
                        playSound('arrival');
                        setTimeout(() => playSound('money'), 500);
                        
                        showNotification(`${ship.name} est arriv√©! +${ship.earnings}‚Ç¨`);
                        
                        ship.destination = null;
                        ship.departureTime = null;
                        ship.travelTime = null;
                        ship.earnings = 0;
                    }
                }
            });
        }

        // Fonctions utilitaires
        function closeModal() {
            document.getElementById('travel-modal').style.display = 'none';
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            setTimeout(() => {
                notification.style.display = 'none';
            }, 3000);
        }

        function saveGame() {
            const saveData = {
                ...gameState,
                timestamp: Date.now()
            };
            
            localStorage.setItem('maritimeEmpire_auto', JSON.stringify(saveData));
            const saveKey = `maritimeEmpire_${Date.now()}`;
            localStorage.setItem(saveKey, JSON.stringify(saveData));
            
            showNotification('Jeu sauvegard√© avec succ√®s!');
        }

        function loadGame() {
            const saveData = localStorage.getItem('maritimeEmpire_auto');
            if (saveData) {
                const parsed = JSON.parse(saveData);
                gameState = parsed;
                
                // Assurer la compatibilit√© avec les nouvelles fonctionnalit√©s
                if (!gameState.adminSettings) {
                    gameState.adminSettings = {
                        rewardMultiplier: 1.0,
                        startMoney: 1000,
                        startFuel: 100,
                        fuelPricePerLiter: 2
                    };
                }
                
                // Ajouter fuel si manquant
                if (gameState.fuel === undefined) {
                    gameState.fuel = 100;
                }
                
                // Ajouter fuelConsumption aux navires existants
                gameState.ships.forEach(ship => {
                    if (ship.fuelConsumption === undefined) {
                        ship.fuelConsumption = 1;
                    }
                });
                
                // Ajouter fuelCost aux destinations existantes
                const defaultFuelCosts = [5, 15, 40, 120, 200, 150];
                gameState.destinations.forEach((dest, index) => {
                    if (dest.fuelCost === undefined) {
                        dest.fuelCost = defaultFuelCosts[index] || 50;
                    }
                });
                
                // Ajouter totalFuelConsumed aux statistiques
                if (gameState.statistics.totalFuelConsumed === undefined) {
                    gameState.statistics.totalFuelConsumed = 0;
                }
                
                updateDisplay();
                showNotification('Jeu charg√© avec succ√®s!');
            } else {
                showNotification('Aucune sauvegarde trouv√©e');
            }
        }

        // Sauvegarde automatique toutes les 2 minutes
        setInterval(saveGame, 120000);

        // V√©rification des arriv√©es toutes les 10 secondes
        setInterval(() => {
            checkArrivals();
            updateDisplay();
        }, 10000);

        // Initialisation
        window.onload = function() {
            const autoSave = localStorage.getItem('maritimeEmpire_auto');
            if (autoSave) {
                gameState = JSON.parse(autoSave);
                
                // Assurer la compatibilit√©
                if (!gameState.adminSettings) {
                    gameState.adminSettings = {
                        rewardMultiplier: 1.0,
                        startMoney: 1000,
                        startFuel: 100,
                        fuelPricePerLiter: 2
                    };
                }
                
                // Ajouter fuel si manquant
                if (gameState.fuel === undefined) {
                    gameState.fuel = 100;
                }
                
                // Ajouter fuelConsumption aux navires existants
                gameState.ships.forEach(ship => {
                    if (ship.fuelConsumption === undefined) {
                        ship.fuelConsumption = 1;
                    }
                });
                
                // Ajouter fuelCost aux destinations existantes
                const defaultFuelCosts = [5, 15, 40, 120, 200, 150];
                gameState.destinations.forEach((dest, index) => {
                    if (dest.fuelCost === undefined) {
                        dest.fuelCost = defaultFuelCosts[index] || 50;
                    }
                });
                
                // Ajouter totalFuelConsumed aux statistiques
                if (gameState.statistics.totalFuelConsumed === undefined) {
                    gameState.statistics.totalFuelConsumed = 0;
                }
            }
            updateDisplay();
        };

        window.onclick = function(event) {
            const modal = document.getElementById('travel-modal');
            if (event.target === modal) {
                closeModal();
            }
        };
    </script>
</body>
</html>